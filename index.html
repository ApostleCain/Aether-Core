<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AETHER: CORE | OS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&family=Inter:wght@300;600&display=swap" rel="stylesheet">
    <style>
        :root { --aether-cyan: #00f2ff; --aether-bg: #050505; }
        body { background: var(--aether-bg); color: #fff; font-family: 'Inter', sans-serif; overflow: hidden; }
        .syncopate { font-family: 'Syncopate', sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.05); }
        .neon-text { text-shadow: 0 0 10px var(--aether-cyan); color: var(--aether-cyan); }
        .neon-border { border: 1px solid var(--aether-cyan); box-shadow: 0 0 15px rgba(0, 242, 255, 0.2); }
        .sector { display: none; animation: slideIn 0.3s ease-out; }
        .sector.active { display: block; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
        .v-bar { width: 4px; background: var(--aether-cyan); border-radius: 2px; }
        .active-v { animation: pulse 0.6s infinite ease-in-out; }
        @keyframes pulse { 0%, 100% { height: 4px; } 50% { height: 20px; } }
    </style>
</head>
<body class="h-screen flex flex-col">

    <input type="file" id="neural-import" accept="audio/*" multiple class="hidden">
    <audio id="core-audio"></audio>

    <div class="flex flex-1 overflow-hidden">
        <aside class="w-20 lg:w-64 bg-black border-r border-white/5 flex flex-col items-center py-8 gap-10 z-50">
            <div class="syncopate font-bold text-xl neon-text">A:C</div>
            <nav class="flex flex-col gap-8 text-zinc-500">
                <button onclick="changeSector('home')" class="hover:text-white transition-all text-xl" title="Home">üè†</button>
                <button onclick="changeSector('library')" class="hover:text-white transition-all text-xl" title="Library">‚åó</button>
                <button onclick="changeSector('playlists')" class="hover:text-white transition-all text-xl" title="Playlists">üìÇ</button>
                <button onclick="document.getElementById('neural-import').click()" class="text-emerald-500 hover:scale-110 transition-all text-2xl" title="Import Music">‚ö°</button>
            </nav>
        </aside>

        <main class="flex-1 overflow-y-auto p-10 bg-gradient-to-br from-cyan-950/10 via-black to-black relative">
            
            <section id="sector-home" class="sector active">
                <h1 class="syncopate text-4xl font-bold mb-4 uppercase">System <span class="neon-text">Core</span></h1>
                <p class="text-zinc-500 mb-8">Uplink active. Welcome to the Aether Interface.</p>
                <div class="glass p-10 rounded-3xl border-2 border-dashed border-zinc-800 text-center">
                    <button onclick="document.getElementById('neural-import').click()" class="bg-white text-black font-black px-8 py-3 rounded-full hover:bg-cyan-400 transition">IMPORT NEURAL FILES</button>
                </div>
            </section>

            <section id="sector-library" class="sector">
                <h1 class="syncopate text-3xl font-bold mb-8 uppercase">Neural <span class="neon-text">Archive</span></h1>
                <div id="library-list" class="flex flex-col gap-2">
                    </div>
            </section>

            <section id="sector-playlists" class="sector">
                <div class="flex justify-between items-center mb-8">
                    <h1 class="syncopate text-3xl font-bold uppercase">Data <span class="neon-text">Stacks</span></h1>
                    <button onclick="createPlaylist()" class="text-[10px] font-bold border border-cyan-500/50 px-4 py-2 rounded-full hover:bg-cyan-500/10">CREATE NEW STACK</button>
                </div>
                <div id="playlist-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    </div>
            </section>

        </main>
    </div>

    <footer class="h-28 bg-black border-t border-white/10 px-10 flex items-center justify-between z-50">
        <div class="w-1/4 flex items-center gap-4">
            <div id="status-bar" class="w-1 h-10 bg-zinc-800 transition-all"></div>
            <div class="truncate">
                <p id="now-playing" class="syncopate text-[10px] font-bold text-zinc-500 truncate">SYSTEM IDLE</p>
                <p id="now-artist" class="text-[9px] text-zinc-700 uppercase">Archive Offline</p>
            </div>
        </div>

        <div class="w-2/4 flex flex-col items-center gap-2">
            <button id="play-pause" onclick="togglePlay()" class="w-12 h-12 rounded-full border border-white/20 flex items-center justify-center hover:neon-border hover:neon-text transition-all">‚ñ∂</button>
            <div class="w-full h-1 bg-zinc-900 rounded-full overflow-hidden">
                <div id="progress" class="h-full bg-cyan-500 w-0"></div>
            </div>
        </div>

        <div class="w-1/4 flex justify-end gap-1 items-end h-6">
            <div class="v-bar h-2"></div><div class="v-bar h-5"></div><div class="v-bar h-3"></div>
        </div>
    </footer>

    <script>
        const audio = document.getElementById('core-audio');
        const libraryList = document.getElementById('library-list');
        const playlistContainer = document.getElementById('playlist-container');
        let globalLibrary = [];
        let playlists = {};

        // NAVIGATION LOGIC
        function changeSector(id) {
            document.querySelectorAll('.sector').forEach(s => s.classList.remove('active'));
            document.getElementById('sector-' + id).classList.add('active');
        }

        // IMPORT LOGIC
        document.getElementById('neural-import').onchange = (e) => {
            const files = Array.from(e.target.files);
            files.forEach(file => {
                const song = { id: Date.now() + Math.random(), name: file.name.replace(/\.[^/.]+$/, ""), url: URL.createObjectURL(file) };
                globalLibrary.push(song);
                renderLibrary();
            });
            changeSector('library');
        };

        function renderLibrary() {
            libraryList.innerHTML = '';
            globalLibrary.forEach(song => {
                const row = document.createElement('div');
                row.className = "glass p-4 rounded-xl flex justify-between items-center group hover:neon-border transition-all";
                row.innerHTML = `
                    <div class="flex items-center gap-4 cursor-pointer" onclick="playSong('${song.name}', '${song.url}')">
                        <span class="text-cyan-500">‚ñ∂</span>
                        <span class="font-bold text-sm">${song.name}</span>
                    </div>
                    <button onclick="addToPlaylistMenu('${song.id}')" class="text-xs text-zinc-600 hover:text-cyan-400 font-bold">+ ADD TO STACK</button>
                `;
                libraryList.appendChild(row);
            });
        }

        // PLAYLIST LOGIC
        function createPlaylist() {
            const name = prompt("Name your Data Stack (Playlist):");
            if (name) {
                playlists[name] = [];
                renderPlaylists();
            }
        }

        function renderPlaylists() {
            playlistContainer.innerHTML = '';
            for (let name in playlists) {
                const div = document.createElement('div');
                div.className = "glass p-6 rounded-2xl border border-white/5";
                div.innerHTML = `
                    <h3 class="syncopate text-xs font-bold neon-text mb-4 uppercase">${name}</h3>
                    <div class="text-[10px] text-zinc-500 mb-4">${playlists[name].length} NEURAL FILES</div>
                    <button onclick="playPlaylist('${name}')" class="text-[10px] font-bold text-white bg-zinc-800 px-4 py-2 rounded">LOAD STACK</button>
                `;
                playlistContainer.appendChild(div);
            }
        }

        function addToPlaylistMenu(songId) {
            const song = globalLibrary.find(s => s.id == songId);
            const pName = prompt("Enter Playlist Name to add to:");
            if (playlists[pName]) {
                playlists[pName].push(song);
                renderPlaylists();
                alert(`Added ${song.name} to ${pName}`);
            } else {
                alert("Playlist not found. Create it in the Playlists sector first!");
            }
        }

        // AUDIO ENGINE
        function playSong(name, url) {
            audio.src = url;
            audio.play();
            document.getElementById('now-playing').innerText = name;
            document.getElementById('now-playing').classList.add('neon-text');
            document.getElementById('status-bar').classList.add('bg-cyan-500', 'neon-border');
            document.getElementById('play-pause').innerText = "‚è∏";
            document.querySelectorAll('.v-bar').forEach(b => b.classList.add('active-v'));
        }

        function togglePlay() {
            if (!audio.src) return;
            if (audio.paused) { audio.play(); document.getElementById('play-pause').innerText = "‚è∏"; }
            else { audio.pause(); document.getElementById('play-pause').innerText = "‚ñ∂"; }
        }

        audio.ontimeupdate = () => {
            document.getElementById('progress').style.width = (audio.currentTime / audio.duration) * 100 + "%";
        };
    </script>
    <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('./sw.js')
        .then(reg => console.log('Aether Core Offline: Active'))
        .catch(err => console.log('Offline Protocol Failed', err));
    });
  }
</script>
</body>
</html>

